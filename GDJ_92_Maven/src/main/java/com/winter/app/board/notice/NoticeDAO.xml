<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <!-- namespace의 이름은 사용하려는 DAO의 풀패키지명과 동일하게 작성 -->
 <mapper namespace="com.winter.app.board.notice.NoticeDAO">
 
 	<!-- id : 이 SQL문을 list()라는 이름으로 매퍼 인터페이스에서 호출할 수 있게 함 -->
 	<!-- resultType :  SQL 실행 결과가 NoticeVO 객체에 자동으로 매핑
 						(컬럼명과 NoticeVO 필드명이 일치해야 자동 매핑됨) -->
 	<select id="list" resultType="NoticeVO" parameterType="Pager">
 		SELECT * FROM NOTICE ORDER BY BOARD_NUM DESC
 		LIMIT #{startIndex}, #{endIndex}
 	</select>
 	<!-- LIMIT : {앞}부터 {뒤}개 출력 -->
 	
 	<select id="totalCount" resultType="Long">
 		SELECT COUNT(BOARD_NUM) FROM NOTICE 
 	</select>
 	
 	<!-- #{} 안에는 getter에서 get을 빼고 카멜케이스로 작성 -->
 	<!-- 결과물을 담아서 이동 = resultType (조회하는 결과가 마다 다르기 때문에) -->
 	<select id="detail" parameterType="NoticeVO" resultType="NoticeVO">
 		SELECT * FROM NOTICE WHERE BOARD_NUM=#{boardNum}
 	</select>
 
 	<!-- ID는 DAO의 메서드명과 동일하게 작성 -->
	 <insert id="insert" parameterType="NoticeVO" useGeneratedKeys="true" keyProperty="boardNum">
	 	INSERT INTO NOTICE
	 	(BOARD_NUM, BOARD_TITLE, BOARD_CONTENTS, BOARD_WRITER, BOARD_DATE, BOARD_HIT)
	 	VALUES
	 	(NULL, #{boardTitle}, #{boardContents}, #{boardWriter}, now(), 0)
	 </insert>
	 
	 <!-- 파일을 저장하는 -->
	 <insert id="insertFile" parameterType="BoardFileVO">
	 	INSERT INTO NOTICEFILES
	 		(FILE_NUM, ORI_NAME, SAVE_NAME, BOARD_NUM)
	 	VALUES
	 		(NULL, #{oriName}, #{saveName}, #{boardNum})
	 </insert>
	 
	 <update id="update" parameterType="NoticeVO">
	 	UPDATE NOTICE SET 
	 		BOARD_TITLE = #{boardTitle},
	 		BOARD_CONTENTS = #{boardContents}
	 		WHERE BOARD_NUM = #{boardNum}
	 </update>
	 
	 <delete id="delete" parameterType="NoticeVO">
	 	DELETE FROM NOTICE
	 	WHERE BOARD_NUM = #{boardNum}
	 </delete>
 
 
 
 </mapper>